# Lefthook configuration
# Replaces Husky git hooks with enhanced functionality

# Pre-commit hook: Run linting and formatting on staged files
pre-commit:
  commands:
    lint-staged:
      run: pnpm exec lint-staged
      stage_fixed: true

# Prepare commit message hook: Auto-generate AI commit messages
prepare-commit-msg:
  commands:
    generate-message:
      run: bash scripts/generate-commit-msg.sh {1}
      fail_text: "Failed to generate commit message"

# Commit message validation: Ensure conventional commit format
commit-msg:
  commands:
    commitlint:
      run: pnpm exec commitlint --edit {1}
      fail_text: "Commit message doesn't follow conventional commits format"

# Pre-push hook: Run quality checks before pushing
pre-push:
  commands:
    lint:
      run: pnpm run lint
      fail_text: "Linting failed. Fix the errors before pushing."
    type-check:
      run: pnpm run type-check
      fail_text: "Type checking failed. Fix the errors before pushing."
    build:
      run: pnpm run build
      fail_text: "Build failed. Fix the errors before pushing."
  # Uncomment below to run tests before push
  # parallel: true  # Run commands in parallel for faster execution
